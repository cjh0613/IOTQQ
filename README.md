IOTQQ --ä¸ºè·¨å¹³å°è€Œç”Ÿ

### âš ï¸ä½¿ç”¨åè®®âš ï¸
- **IOTQQ ä¸å¾—ç”¨äºåŒ…æ‹¬ä¸”ä¸é™äº~~èµŒåšã€è‰²æƒ…ã€äº‘ç›˜ã€æ”¿æ²»~~ ç­‰ç½‘ç»œè¿æ³•è¿è§„æœåŠ¡ï¼Œè¿è€…å¿…ç©¶**
- **ç”¨æˆ·ä¸å¾—ä½¿ç”¨ IOTQQ æ¥è¿›è¡Œæ‰¹é‡ä¸šåŠ¡ï¼Œå¦‚ï¼šæ‰¹é‡åŠ ç¾¤ï¼ŒåŠ å¥½å‹ç­‰ã€‚**
- **ç”¨æˆ·åœ¨ä½¿ç”¨æœ¬è½¯ä»¶è¿‡ç¨‹ä¸­ï¼Œåº”éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ä¸æ·±åœ³å¸‚è…¾è®¯è®¡ç®—æœºç³»ç»Ÿæœ‰é™å…¬å¸ç”¨æˆ·åè®®ä¸­ç›¸å…³è¡Œä¸ºè§„èŒƒï¼Œä¸”ç”¨æˆ·ä¸èƒ½ä½¿ç”¨æœ¬è½¯ä»¶è¿›è¡Œä»¥ä¸‹è¡Œä¸ºï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šå¹¿å‘Šä¼ æ’­ã€é»‘äº§ã€é»„ã€èµŒã€æ¯’ã€PCè›‹è›‹ã€åŒ—äº¬èµ›è½¦ã€é»‘è‰²äº§ä¸šã€ç°è‰²äº§ä¸šã€ç®—è´¦ä¸‹æ³¨ã€ç¾¤å‘ã€æ‰¹é‡åŠ ç¾¤ç­‰ä»»ä½•è¿æ³•çŠ¯ç½ªæˆ–ä¸çŠ¯ç½ªç›¸å…³ï¼Œç”¨æˆ·ä½¿ç”¨æœ¬è½¯ä»¶è¿›è¡Œç›¸å…³è¿æ³•çŠ¯ç½ªçš„è¡Œä¸ºï¼Œå‡åº”ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…ï¼ŒIOTQQä¸å¯¹ç”¨æˆ·çš„ä»»ä½•è¨€è¡Œä¸è¡Œä¸ºæ‰¿æ‹…ä»»ä½•è´£ä»»**
- **å…è´£å£°æ˜ï¼šIOTQQè½¯ä»¶æ˜¯ä¸€æ¬¾åŸºäºQQåè®®çš„AIæœºå™¨äººè½¯ä»¶ï¼Œä¸»è¦ç”¨äºæ´»è·ƒQQç¾¤æ°”æ°›ã€ç®¡ç†ç¾¤ã€ç¾¤å†…å¨±ä¹æ´»åŠ¨ç­‰ï¼Œåè®®ç‰ˆæƒå½’å±äºæ·±åœ³å¸‚è…¾è®¯è®¡ç®—æœºç³»ç»Ÿæœ‰é™å…¬å¸æ‰€æœ‰ï¼Œè¯·è”ç³»é‚®ç®±(1700487478@qq.com)ï¼Œå°†ä¼šå¯¹è½¯ä»¶ä¸‹æ¶å¹¶åˆ é™¤ç›¸å…³å†…å®¹ã€‚**

### ğŸ†•æ ‘è“æ´¾è¿è¡Œå±•ç¤ºğŸ†•
- **[èŠéº»å¼€é—¨ VNC](http://101.71.139.30:43288/vnc.html) å¯†ç 12345678**

------------

|  IOTQQåŠŸèƒ½ | Free  â¬†ï¸              |
| ------------- | ------------------------------ |
| `å¥½å‹æ¶ˆæ¯ æ”¶å‘è¯­éŸ³æ–‡å­—å›¾æ–‡XML/JSON`| âœ…     |
| `ç¾¤ç»„æ¶ˆæ¯ æ”¶å‘è¯­éŸ³æ–‡å­—å›¾æ–‡XML/JSON`   |  âœ…    |
| `ç§èŠæ¶ˆæ¯ æ”¶å‘è¯­éŸ³æ–‡å­—å›¾æ–‡XML/JSON`   |  âœ…    |
| `Open RedBag`   | âœ…    |
| `Send  RedBag`   |   âŒ    |
| `QQç©ºé—´å‘å›¾æ–‡`  |  âŒ      |
| `ç¾¤ é‚€è¯·/è¸¢äºº/åŠ ç¾¤`    |  âœ…   |
| `å¥½å‹ é€šè¿‡/æ‹’ç»/åŠ äºº`    |  âœ…     |
| `è´¦å· ç™»é™†`    |   âŒ |
| `å¤šè´¦å· ç™»é™†`    |  âŒ   |

**é¡¹ç›®ä»‹ç»**

*âš ï¸è¿è¡Œé¡¹ç›®çš„å¿…è¦æ¡ä»¶ éœ€è¦å¤–ç½‘IPç”¨æ¥æ¥æ”¶GitHubçš„WebHooké€šçŸ¥ éå¤–ç½‘ç”¨æˆ·å¯ä»¥å€ŸåŠ©è½¬å‘å·¥å…·æ¥è§£å†³ å¦‚*
>frp

>ngrok

- **ğŸ†“**
- **ğŸŒé‡‡ç”¨ç‹¬ç‰¹çš„æ’ä»¶æœºåˆ¶ --Lua**
- **ğŸŒæä¾›WebSocket ï¼ˆSocketIOï¼‰**
- **ğŸŒæä¾›Web API**
- **ğŸŒå†…ç½®åç¨‹æ±  é«˜æ•ˆ ç¨³å®š è¿¸å‘**
- **ğŸŒå®Œæˆäº†å¤§éƒ¨åˆ†æ ¸å¿ƒæ¥å£ å…¶ä»–å¿…è¦æ¥å£å°†åç»­æ›´æ–° å¯åœ¨[issues](https://github.com/IOTQQ/IOTQQ/issues)ä¸­æå‡º bug or todo**
- **ä¸æ–­ç”µç¨³å®šè¿è¡Œ 0 å´© é”™è¯¯æ—¥å¿—å°†ä¼šåœ¨logä¸­ä½“ç°**

#### ğŸ’—å¼€å¯è¿è¡Œä¹‹æ—…

------------
```go
fmt.Println("Github Token ä¼šç”¨æ¥åˆ›å»ºé€šçŸ¥ä»“åº“ å¦‚æœä¸æ”¾å¿ƒä½¿ç”¨ è¯·å»ºç«‹å°å· åˆå§‹åŒ–æ‰€æœ‰æ“ä½œè®°å¾—æ¸…ç©ºBot-Notify ä»“åº“")
```

**1âƒ£ï¸ä¸‹è½½å¯¹åº”å¹³å°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶åŒ…** 

**2âƒ£ï¸ç”³è¯·GitHub Token ç”¨äºGitHubApiè®¿é—® é»˜è®¤é™åˆ¶æ¯å°æ—¶60æ¬¡è¯·æ±‚ æœ‰äº†Tokenå¯ä»¥5000/h
 ç”³è¯·æµç¨‹ç™»é™†GitHubå->settings-> Developer settings->Developer settings->Generate New Token
 å¼€å¯å…¨éƒ¨Tokenæƒé™!**
 
**3âƒ£ï¸å¡«å†™é…ç½®æ–‡ä»¶CoreConf.conf**


       #é»˜è®¤ä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶ æš‚æ—¶ä¸æ”¯æŒé›†ç¾¤æ¨¡å¼
      EnabledEtcd = false
        [Etcd]
          Nodes = ["", "", ""]
        [GithubConf]
        #å¿…å¡« GitHubç”³è¯·å›æ¥çš„Token
          Token = ""
          FullName = ""
          IssuesNum = 1
         #å¿…å¡« åŸŸåç«¯å£æ›¿æ¢æˆå¤–ç½‘çš„IP:PORT 
          WebHookUrl = "http://xxxx.com:8080/v1/Github/WebHook"
          BitFlag = 0
          BitCtrl = 0
          CommentID = 0


    

**4âƒ£ï¸è¿è¡Œç¨‹åº æ‰§è¡Œå‘½ä»¤ `./IOTQQ è¿è¡Œwebsocket/webapi æœåŠ¡ç«¯å£å· å¦‚:  ./IOTQQ 8080`**

**5âƒ£ï¸ä¸€åˆ‡å‡†å¤‡å°±ç»ª å½“ä½ å¤–ç½‘æœåŠ¡å™¨IP:PORT æˆ–(å†…ç½‘ç”¨æˆ·)ç»è¿‡è½¬å‘OKæ—¶ åœ¨æ‰“å¼€æµè§ˆå™¨è®¿é—®WebHookUrl æµè§ˆå™¨è¿”å›OKåˆ™å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥ ä¸é€šè¯·æ£€æŸ¥é˜²ç«å¢™ or è½¬å‘é…ç½®**

------------


#### â¤ï¸åˆå§‹åŒ–æœåŠ¡

- **æœåŠ¡è¿è¡ŒæˆåŠŸåè®¿é—®URL http://IP:PORT/v1/Github/InstallService åˆå§‹åŒ–æˆåŠŸåæ§åˆ¶å°ä¼šæç¤º `Authåˆå§‹åŒ–å®Œæˆ` è‹¥æœªæç¤º é‡å¤ä¸Šè¿°æ“ä½œ åˆå§‹åŒ–å®Œæˆåå°±å¯ä»¥ ğŸŒŠäº†**

- **è·å–ç™»é™†äºŒç»´ç  è®¿é—®Url http://IP:PORT/v1/Login/GetQRCOde æ‰«ç ç™»é™†å³å¯**

------------


### ğŸ†’Luaç›¸å…³API

###### WebPlugin APi
- è¯·å‹¿ä¿®æ”¹ WebPluginsç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶åä»¥åŠæ–‡ä»¶å†…å®¹çš„å‡½æ•°å å¦åˆ™éƒ¨åˆ†WebAPæ¥å£ä¼šå¤±æ•ˆ
ä¾‹å¦‚ `Api_AddFriend.lua` æ–‡ä»¶å†…å®¹ å¯ä¿®æ”¹ä»£ç é€»è¾‘

```lua
local log = require("log")
local api = require("coreApi")
function Api_AddFriend(CurrentQQ, data)
  --Coding start
    luaRes = api.api_GetUserAddFriendSetting(CurrentQQ, data.AddUserUid, data.Content)
    log.notice("From Lua api_GetUserAddFriendSetting Ret\n%d", luaRes.AddType)
    luaRes.Content = data.Content
    --æ¥æº2011 ç©ºé—´2020 QQæœç´¢ 2004ç¾¤ç»„ 2005è®¨è®ºç»„
    luaRes.AddFromSource = data.AddFromSource
    luaRes.FromGroupID = data.FromGroupID
    api.api_AddFriend(CurrentQQ, luaRes)
    return luaRes
  --Coding end
  
end
```
###### Plugin APi
- æ’ä»¶å‘½åä¸å—é™åˆ¶ xxx.lua ä½†æ˜¯å¿…é¡»å®ç°ä»¥ä¸‹å‡½æ•° 

```lua
--æ”¶åˆ°å¥½å‹/ç§èŠæ¶ˆæ¯è§¦å‘è¯¥å‡½æ•°
function ReceiveFriendMsg(CurrentQQ, data)
    return 1
end
--æ”¶åˆ°ç¾¤æ¶ˆæ¯è§¦å‘è¯¥å‡½æ•°
function ReceiveGroupMsg(CurrentQQ, data)
    return 1
end
--æ”¶åˆ°å¥½å‹ç›¸å…³äº‹ä»¶è§¦å‘è¯¥å‡½æ•°
function ReceiveFriendEvents(CurrentQQ, data, extData)
    return 1
end
--æ”¶åˆ°ç¾¤ç›¸å…³äº‹ä»¶è§¦å‘è¯¥å‡½æ•°
function ReceiveGroupEvents(CurrentQQ, data, extData)
    return 1
end

```
- ç›¸å…³APiç”¨æ³•è¯·æŸ¥é˜…Pluginsç›®å½•ä¸‹çš„ç›¸å…³æ–‡ä»¶è°ƒç”¨ä¾‹ç¨‹ è¿™é‡Œä¸å†èµ˜è¿°

------------

###### WebSocket APi 

- **å®ç°çš„åŠŸèƒ½æ¯”è¾ƒå°‘åªåšäº†å‡ ä¸ª é…åˆWebAPI å®ç° webQQ æ˜“å¦‚åæŒ**
- ** ç»™å‡ºéƒ¨åˆ†jsä»£ç **

```javascript
<script>
    var User = localStorage.getItem('User');
   
    var socket = io("127.0.0.1:8888", {
      transports: ['websocket']
    });

    socket.on('connect',
    function() {
        //ä»ç¼“å­˜æˆ–ä»cookies è¯»å–å†å²ç™»é™†çš„QQå·
        //é“¾æ¥æˆåŠŸåè·å–ç”¨æˆ·ç¼“å­˜ è·å–æˆåŠŸåç›´æ¥åŒæ­¥æ¶ˆæ¯ å¤±è´¥ç›´æ¥è·å–äºŒç»´ç 
        //åŒä¸€æµè§ˆå™¨ä¼šç½®æ¢å½“å‰çš„websocket id
    
      if (User == null){

      //è·å–äºŒç»´ç 
      socket.emit('GetQrcode', '1234', (data) =>{
      console.log(data); // data will be 'woot'
      var JsonPkg = JSON.parse(data);
      $('#qrcode').attr("src", 'data:image/png;base64,' + JsonPkg.Data.BQrpic);

       });

      }else{

        socket.emit('GetWebConn', User, (data) =>{
        console.log(data);

        $('#qrcode').attr("src", 'http://q1.qlogo.cn/g?b=qq&nk=' + User + '&s=640');
      });

      }
     
    })
    socket.on('OnCheckLoginQrcode',
    function(data) {
      //48æœªæ‰«æ 53å·²æ‰«ç  17 49 è¿‡æœŸäº†
      // if (data.Data.ScanStatus ==17 || data.Data.ScanStatus == 49){
      // }
        console.log(data);
    });

    socket.on('OnLoginSuccess',
    function(data) {

      // ç§»é™¤æ‰€æœ‰
      localStorage.clear();
      console.log(data);

      $('#qrcode').attr("src", 'http://q1.qlogo.cn/g?b=qq&nk=' + data.Uin + '&s=640');
      localStorage.setItem('User', data.Uin);
      localStorage.setItem('Nick', data.Nick);

      //window.location = "/main.html";
    });

       //è·å–ç¾¤æˆå‘˜åˆ—è¡¨
       socket.emit('GetTroopMemberList', JSON.stringify({"Uid":User+"","Group":654264644}));
       //  //ç»‘å®šç¾¤æˆå‘˜è¿”å›æ•°æ®äº‹ä»¶
       socket.on('OnTroopMemberInfo',function(data){

        console.log(data); 

       });
       // //è·å–å¥½å‹åˆ—è¡¨å‘½ä»¤
       //  socket.emit('GetFriendList',User);
       //  //ç»‘å®šå¥½å‹è¿”å›æ•°æ®äº‹ä»¶
       // socket.on('OnFriendlistInfo',function(data){

       //  console.log(data); 

       // });

        //è·å–ç¾¤åˆ—è¡¨å‘½ä»¤ 
        //socket.emit('GetTroopList', User);
        //ç»‘å®šç¾¤åˆ—è¡¨è¿”å›æ•°æ®äº‹ä»¶
       socket.on('OnTroopListInfo',function(data){

        console.log(data); 

       });

        socket.on('OnGroupMsgs',function(data){
            console.log("æ”¶åˆ°ç¾¤æ¶ˆæ¯");
            console.log(data);

        });
        socket.on('OnFriendMsgs',function(data){
            console.log("æ”¶åˆ°å¥½å‹æ¶ˆæ¯");
            console.log(data);

        });

</script> 
```
###### Web APi


- **è¯·å¯¼å…¥ä»“åº“ä¸­çš„WebAPI.jsonåˆ°Chromeçš„Restlet Client - REST API Testingæ’ä»¶ä¸­**


- ![WEBAPI](https://camo.githubusercontent.com/7f14b2ca2de14d40fc2d127392eea3fa04c78788/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30392f30322f634e596a48676d52366f6244324c462e706e67)


- **æ’ä»¶ä¸‹è½½åœ°å€[Restlet Client](https://chrome.google.com/webstore/detail/aejoelaoggembcahagimdiliamlcdmfm "1")**

### Tips

- **ğŸ˜„ç™»é™†æˆåŠŸååœ¨æ‰‹æœºç«¯å›å¤ç”µè„‘ systeminfoå¯æŸ¥çœ‹ç›¸å…³æ”¶å‘åŒ…ç­‰ä¿¡æ¯**
- **ğŸ˜„è®¿é—®URL :http://IP:PORT/v1/ClusterInfo å¯ä»¥æŸ¥è¯¢ç›¸å…³ä¿¡æ¯**
- **ğŸ˜„é›†ç¾¤æ¨¡å¼æš‚æœªå¼€æ”¾**
- **ğŸ˜„å¤šè´¦å·ç™»é™†éœ€æˆæƒ**

